from supervised_LinearSVC import *

import pytest
import pandas as pd
import numpy as np
from ml_prepare import ML_prepare


def test_create_score_list_result():
    score_list_test = [[0.2, 0.3333333333333333, 0.7, 0.5], [0.5, 0.0, 0.5714285714285714, 0.3888888888888889], [0.25, 0.3333333333333333, 0.0, 0.16666666666666666],
        [0.5, 0.4, 0.2222222222222222, 0.3333333333333333], [0.5, 0.2, 0.2222222222222222, 0.2777777777777778], [0.6666666666666666, 0.25, 0.7, 0.5882352941176471], [0.09090909090909091, 0.39285714285714285, 0.5806451612903226, 0.42857142857142855], [0.0, 0.22727272727272727, 0.8787878787878788, 0.4927536231884058], [0.0, 0.43333333333333335, 0.5161290322580645, 0.42028985507246375], [0.125, 0.3333333333333333, 0.7857142857142857, 0.47058823529411764], [0.0, 0.46153846153846156, 0.7307692307692307, 0.45588235294117646], [0.0, 0.23529411764705882, 0.5357142857142857, 0.3382352941176471], [0.0, 0.0, 0.8888888888888888, 0.4444444444444444], [0.3333333333333333, 0.4, 0.42857142857142855, 0.3888888888888889], [0.5, 0.3333333333333333, 0.625, 0.5], [0.6666666666666666, 0.0, 0.5555555555555556, 0.3888888888888889], [0.0, 0.16666666666666666, 0.6666666666666666, 0.3888888888888889], [0.3333333333333333, 0.5, 0.6666666666666666, 0.5555555555555556], [0.2222222222222222, 0.3333333333333333, 0.41379310344827586, 0.33783783783783783], [0.10526315789473684, 0.2857142857142857, 0.6153846153846154, 0.3561643835616438], [0.043478260869565216, 0.6428571428571429, 0.5909090909090909, 0.4383561643835616], [0.25, 0.42857142857142855, 0.5161290322580645, 0.4166666666666667], [0.25, 0.47619047619047616, 0.5483870967741935, 0.4444444444444444], [0.29411764705882354, 0.3157894736842105, 0.5, 0.4027777777777778], [0.5, 0.6, 0.2857142857142857, 0.4444444444444444], [0.5, 0.6666666666666666, 0.25, 0.4444444444444444], [0.5, 0.6666666666666666, 0.25, 0.4444444444444444], [0.6666666666666666, 0.14285714285714285, 0.5, 0.3888888888888889], [0.5, 0.625, 0.0, 0.3333333333333333], [0.25, 0.42857142857142855, 0.5, 0.4117647058823529], [0.0, 0.8, 0.5, 0.5428571428571428], [0.0, 0.696969696969697, 0.5416666666666666, 0.5217391304347826], [0.0, 0.7096774193548387, 0.6206896551724138,
        0.5797101449275363], [0.0, 0.7, 0.6, 0.5294117647058824], [0.1, 0.7894736842105263, 0.55, 0.6176470588235294], [0.09090909090909091, 0.6052631578947368, 0.631578947368421, 0.5294117647058824], [0.16666666666666666, 0.3333333333333333, 1.0, 0.5], [0.25, 0.42857142857142855, 0.7142857142857143, 0.5], [0.6666666666666666, 0.42857142857142855, 0.875, 0.6666666666666666], [0.6666666666666666, 0.2857142857142857, 1.0, 0.6666666666666666], [0.5, 0.4444444444444444, 0.8571428571428571, 0.6111111111111112], [0.4, 0.5714285714285714, 0.6666666666666666, 0.5555555555555556], [0.17391304347826086, 0.8, 0.38461538461538464, 0.4594594594594595], [0.1, 0.5625, 0.38095238095238093, 0.3835616438356164], [0.25, 0.5454545454545454, 0.5, 0.4657534246575342], [0.2631578947368421, 0.6923076923076923, 0.4444444444444444, 0.4861111111111111], [0.23809523809523808, 0.6470588235294118, 0.35294117647058826, 0.4583333333333333], [0.4, 0.5925925925925926, 0.56, 0.5277777777777778]]
    delay_lst = [*range(0, 18, 3)]
    sections = ['all','total_counts', 'filaments', 'various']
    labels = ['SV_label', 'SVI_label']
    score_lst = create_score_list(labels, sections, delay_lst)
    assert score_lst == score_list_test


def test_score_by_label():
    y_test = pd.Series(['good', 'bad', 'reasonable'])
    y_predict = ['good', 'bad', 'reasonable']
    score = [1, 1, 1]
    assert score == score_by_label (y_test, y_predict)